## 引言

用java编写一个简单的数据库系统

* [课程官网](https://ocw.mit.edu/courses/6-830-database-systems-fall-2010/6d426ed098eb42a869a5db6d2d506a10_MIT6_830F10_lab1.pdf)
* [参考github](https://github.com/DevinZ1993/SimpleDB-Database-System/blob/master/src/simpledb/TupleDesc.java)

用一个元组Tuple.class表示行，用

## 流程

1. 实现TupleDesc，通过TupleDescTest
2. 实现Tuple,通过TupleTest
3. 实现HeapPageId（PageId接口的实现类）中的部分方法
4. 实现RecordId
5. 实现Catalog,通过CatalogTest

* 实现`BufferPool.java`构造器和getPage方法
* 实现`HeapFile`

## TupleDesc

标识一个Tuple的模式

实现TupleDesc中的关键方法

### 成员变量

| 变量名  | 类型     | 解释                             |
| ------- | -------- | -------------------------------- |
| TDItem  | class    | 一个column的表示，包含类型和列名 |
| typeAr  | Type[]   | 列类型集合                       |
| fieldAr | String[] | 列名集合                         |
|         |          |                                  |

### 方法

| 方法名           | 形参                            | 返回值     | 解释                       |
| ---------------- | ------------------------------- | ---------- | -------------------------- |
| iterator()       | 无                              | Iterator() | 返回一个列的迭代器         |
| 双参构造器       | Type[] typeAr, String[] fieldAr |            | 根据传入的列类型、名实例化 |
| 单参构造器       | Type[] typeAr                   |            |                            |
| 无参构造器       |                                 |            |                            |
| numFields        | 无                              | int        | 返回列的数量               |
| getFieldName     | int                             | String     | 返回给定索引的列名         |
| getFieldType     | int                             | Type       | 返回给定索引的列类型       |
| fieldNameToIndex | String                          | int        | 返回给定列名的索引         |
| getSize          | 无                              | int        | 返回当前元组占用的字节数   |
| merge            | 两个TupleDesc                   | TupleDesc  | 合并两个TupleDesc          |
| equals           | Object                          | boolean    | 比较两个对象是否相等       |
| hashCode         | 无                              | int        | 返回hashcode               |
| toString         | 无                              | String     | 序列化当前Tuple            |

## Tuple

存储一个Tuple的数据

需要写的依赖类

* HeapPageId
* RecordId 依赖 heappageids



## HeapPageId

* 接口PageId的实现类
* 存放table在硬盘上的页id和表的id

## RecordId

* 指向特定页上的特定表中的一个特定元组

## catalog

* 存放数据库中所有表及其结构
* 

## 错误排查

* 跳转到报错的XXXTest.java，查看报错方法里的测试语句
