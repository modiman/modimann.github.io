## 启动（windows）

* https://www.runoob.com/mongodb/mongodb-window-install.html

### 首先创建数据存储路径（需要在根目录下）

* 在E盘下依次建立data\db文件夹
* 找到mongodb安装目录，进入bin路径下
* 地址栏下输入cmd进入命令行窗口
* 输入命令

```bat
C:\Program Files\MongoDB\Server\5.0\bin> mongod --dbpath E:\data\db
```

<img src="E:\gitfile\notes\就业\imgs\image-20211109164730773.png">

此时启动成功，可以使用mongodb桌面版连接

# Linux安装mongoDB

参考官网教程：https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/

### 错误1：E: Unable to locate package mongodb-org     http://corpus.hubwiz.com/2/node.js/28945921.html

### 错误2： Create this directory or give existing directory in --dbpath. 

缺乏数据库存储路径

创建一个新的文件夹

```bash
#回到根目录
mkdir -p /data/db    创建/data/db
# 分配访问权限
sudo chown -R  `whoami` /data

```

### 错误3

mongod 命令执行发现已经有进程在运行mongod数据库--errno:48 Address already in use for socket: 0.0.0.0:27017

找到占用进程并终止

```bash
ps aux | grep mongod

kill -9 进程号
```

# 数据备份与恢复

将本地数据库转存到数据库

如果本地没有安装mongodump.exe与mongorestore.exe，需要提前安装

下载地址（https://www.mongodb.com/try/download/database-tools）

默认安装路径C:\Program Files\MongoDB\Tools\100\bin

进入该路径，进入cmd窗口

## 数据备份

```bash
mongodump -h dbhost -d dbname -o dbdirectory
```

 

## 数据恢复

```bash
mongorestore -h <hostname><:port> -d dbname <path>
```

 

- --host <:port>, -h <:port>：

  MongoDB所在服务器地址，默认为： localhost:27017

- --db , -d ：

  需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2

- --drop：

  恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用哦！

- <path>：

  mongorestore 最后的一个参数，设置备份数据所在位置，例如：c:\data\dump\test。

  你不能同时指定 <path> 和 --dir 选项，--dir也可以设置备份目录。

- --dir：

  指定备份的目录

  你不能同时指定 <path> 和 --dir 选项

执行完成后发现path下多了一个数据库同名文件夹

**如果报错，加-drop参数**



## 常见错误

* code=exited, status=14

https://askubuntu.com/questions/823288/mongodb-loads-but-breaks-returning-status-14

## 数据操作

* <a href="https://www.runoob.com/python3/python-mongodb-query-document.html">菜鸟教程</a>

