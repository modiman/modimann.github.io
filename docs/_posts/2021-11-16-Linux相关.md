[toc]



## 1. 系统操作

### 1.1 cmd打开服务器

ssh 用户名@主机名

```bash
ssh omnisky@172.21.7.94
```

### 1.2 Screen命令

打开一个新的screen

```
screen -S screen_name
```

恢复screen 

```
screen -r screen_name
screen -d -r screen_name
```

查看当前是否在screen中

```
echo $STY
```

查看所有的screen

```
screen -ls
```

删除screen

```
screen -S session_name -X quit
```









### 1.3 conda离线安装

将anaconda安装包复制到本机

配置环境变量

```bash
export PATH=/home/hm/anaconda3/bin:$PATH
```

### 1.4 新建用户

```bash
adduser hm
```

### 1.5 查看内存使用情况

```bash
free -m
```



## 2. 文件操作

### 2.1 传输文件

Linux scp 命令用于 Linux 之间复制文件和目录。

**本地复制到远程服务器**

```bash
scp local_file remote_username@remote_ip:remote_folder 
# 将本地名为HeMeng 的文件夹复制到地址为172.21.7.94的主机的/home/omnisky/hm目录下，
scp -rp ./HeMeng 172.21.7.94:/home/omnisky/hm
# 两个路径调转则变为从远程主机下载到本地
```



### 2.2 删除文件夹

```bash
rm -rf filedir
```

该命令会直接删除文件夹，不会给出警告信息和提示

* 有提示

```bash
rm -i filename
```

* 无提示

```bash
rm -f filename
或
rm filename
```

### 2.3查看所有文件，包括隐藏的

```bash
ls -a
```

### 2.4批量删除文件

```bash
# 所有以aaa开头的文件
rm -rf aaa*
```

### 2.5 解压

* https://cloud.tencent.com/developer/article/1404921

```bash
# 解压：
unzip FileName.zip
# 压缩：
zip FileName.zip DirName
```

=======

### 2.6读取文本并输出

```bash
cat input.txt
```

### 2.7 修改文件/文件夹名

```bash
mv 原名 改后名
# 例
mv '安装包' packages
```

### 2.8 移动文件

```bash
mv 要移动的文件  目标路径
# 例
mv test.txt  /home/modige/document
```

## shell脚本

编写一个调参脚本bat.sh，遍历需要试的超参，逐个跑实验

以测试向量维度为例

```sh
# 生成一个文件
vi bat.sh
# 写入如下内容
for i in 100 200 300 400 500;do
    bash run.sh train RotatE FB15k-237 0 0 1024 256 ${i} 9.0 1.0 0.00005 100000 16 -de
done
# 保存并退出
# 执行写好的脚本
sh bat.sh
```



## 2020 11 06 几个shell命令的使用

```bash
1. awk '{print $1}' sam.log|uniq -c|sort -g|tail -10
```



用空格切割字符串并取第一项，去重并显示每条出现次数，按出现次数排序，取前十 （awk命令用来按行切割文本中的字符串，默认以空格为分隔符 print $1 代表输出切分后的第一项 sam.log是被处理的文件名 uniq 命令指去除重复的行， -c代表 显示每行出现过的次数 没有文件名时默认以标准输出作为输入 sort 指排序 tail -10 取最后10项）

2. grep GET sam.log |awk '{print $1}' sam.log|uniq -c|sort -g|tail -5

筛选出含“GET“ 的行，。。。 (grep GET　sam.log命令指筛选出文件sam.log中含＂ＧＥＴ＂的字符串)

3. awk '{print $4}' sam.log |cut -c 14-18|uniq -c|sort -g|tail -5 取出时间所在的项，切出时，分，去重，排序

4. cut -d '"' sam.log -f 4 |cut -d '/' -f 3| sort | uniq -c 用 “ 切割每一行，取第四项，用 / 切割，取第三项 去重

# 各类软件安装

## Redis

1. 将压缩包放到想放的位置

2. 解压  

   ```bash
   tar xzvf redis-6.2.3.tar.gz
   ```

   

3. 进入redis根目录

   ```bash
    cd redis-6.2.3
   ```

4. 

   ```bash
   make
   ```

   如果这一步出错，改用

   ```bash
   make MALLOC=libc
   ```

5. 此时在根目录下已经可以启动服务

   ```bash
   redis-server  # 启动服务器
   redis-cli   # 启动客户端
   ```

6. 添加环境变量以便从任意路径启动

   ```bash
   echo "export REDIS_HOME=/home/modige/softs/redis-6.2.3" >>/etc/profile
   echo "export PTAH=$PATH:$REDIS_HOME" >>/etc/profile
   ```

   ## 备份与恢复

   https://www.runoob.com/redis/redis-backup.html

# IO

6. 

## Linux安装mongoDB

参考官网教程：https://docs.mongodb.com/manual/tutorial/install-mongodb-on-ubuntu/

* 错误1：E: Unable to locate package mongodb-org     http://corpus.hubwiz.com/2/node.js/28945921.html

* 错误2： Create this directory or give existing directory in --dbpath. 

​	缺乏数据库存储路径

​	创建一个新的文件夹

```bash
#回到根目录
mkdir -p /data/db    创建/data/db
# 分配访问权限
sudo chown -R  `whoami` /data

```

* 错误3

mongod 命令执行发现已经有进程在运行mongod数据库--errno:48 Address already in use for socket: 0.0.0.0:27017

找到占用进程并终止

```bash
ps aux | grep mongod

kill -9 进程号
```

### 启动（windows）

* https://www.runoob.com/mongodb/mongodb-window-install.html

​	首先创建数据存储路径（需要在根目录下）

* 在E盘下依次建立data\db文件夹
* 找到mongodb安装目录，进入bin路径下
* 地址栏下输入cmd进入命令行窗口
* 输入命令

```bat
C:\Program Files\MongoDB\Server\5.0\bin> mongod --dbpath E:\data\db
```

<img src="E:\gitfile\notes\就业\imgs\image-20211109164730773.png">

此时启动成功，可以使用mongodb桌面版连接

### 数据备份与恢复

将本地数据库转存到数据库

如果本地没有安装mongodump.exe与mongorestore.exe，需要提前安装

下载地址（https://www.mongodb.com/try/download/database-tools）

默认安装路径C:\Program Files\MongoDB\Tools\100\bin

进入该路径，进入cmd窗口

### 数据备份

```bash
mongodump -h dbhost -d dbname -o dbdirectory
```

### 数据恢复

```bash
mongorestore -h <hostname><:port> -d dbname <path>
```

 

- --host <:port>, -h <:port>：

  MongoDB所在服务器地址，默认为： localhost:27017

- --db , -d ：

  需要恢复的数据库实例，例如：test，当然这个名称也可以和备份时候的不一样，比如test2

- --drop：

  恢复的时候，先删除当前数据，然后恢复备份的数据。就是说，恢复后，备份后添加修改的数据都会被删除，慎用哦！

- <path>：

  mongorestore 最后的一个参数，设置备份数据所在位置，例如：c:\data\dump\test。

  你不能同时指定 <path> 和 --dir 选项，--dir也可以设置备份目录。

- --dir：

  指定备份的目录

  你不能同时指定 <path> 和 --dir 选项

执行完成后发现path下多了一个数据库同名文件夹

**如果报错，加-drop参数**



### 常见错误

* code=exited, status=14

https://askubuntu.com/questions/823288/mongodb-loads-but-breaks-returning-status-14

### 数据操作

* <a href="https://www.runoob.com/python3/python-mongodb-query-document.html">菜鸟教程</a>

