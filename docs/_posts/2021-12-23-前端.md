## PageHelper分页

**使用PageHelper实现的分页，可以直接在地址栏中输入`http://localhost:8080/xxx?page=5&size=5`访问**

后续的页面跳转也是通过拼接出这样的字符串实现（全局刷新）

### 前端

```html
<table class="layui-table">
            <thead>
            <tr>
                <td>序号</td>
                <td>单词</td>
                <td>中文</td>
                <td>补充</td>
                <td>操作</td>
            </tr>
            </thead>
            <tbody>
            <tr th:each="word,stat:${pageInfo.list}">
                <td th:text="${word.getWid()}"></td>
                <td th:text="${word.getWname()}"></td>
                <td th:text="${word.getWmeaning()}"></td>
                <td th:text="${word.getWbuchong()}"></td>
            </tr>
            </tbody>
        </table>

<!--           跳转部分   >-->
<button class="layui-btn"><a th:href="@{/word-manage/pagehelper} " class="btn">首页</a></button>
        <button class="layui-btn"><a th:href="@{'/word-manage/pagehelper?page='+${pageInfo.getPrePage()}+'&size=4'} " class="btn">上一页</a></button>
  

        <button class="layui-btn"><a th:href="@{'/word-manage/pagehelper?page='+${pageInfo.getNextPage()}+'&size=4'}" >下一页</a></button>

        <button class="layui-btn"><a th:href="@{'/word-manage/pagehelper?page='+${pageInfo.getTotal()/4}+'&size=4'} " class="btn">末页</a></button>

        <button class="layui-btn" th:text="'当前为第'+${pageInfo.getPageNum()}+'页'" ></span></button>

```

### Controller

```java
@RequestMapping("/pagehelper")
public ModelAndView findAll(@RequestParam(name = "page",required = true,defaultValue = "1") int page,
                            @RequestParam(name = "size",required = true,defaultValue = "4") int size) throws Exception {
    ModelAndView mv=new ModelAndView("/word-manage/pagehelper");

    PageInfo pageInfo = wordService.findAllWordByPage(page,size);
    //PageInfo就是一个分页Bean

    mv.addObject("pageInfo",pageInfo);
    return mv;
}
```

### Service

```java
    PageInfo<Word>  findAllWordByPage(int pageNum, int pageSize);

```

### impl

```java
    @Override
    public PageInfo<Word> findAllWordByPage(int pageNum, int pageSize) {

        PageHelper.startPage(pageNum, pageSize);
        List<Word> lists = wordMapper.getAllWords();
        PageInfo<Word> pageInfo = new PageInfo<>(lists);
        return pageInfo;
    }
```

## Thymeleaf

### 循环numbers.sequence

```html
<option  th:each="pagenum:${#numbers.sequence(0,pageInfo.getTotal()/4)}" th:text="${pagenum}" th:value="${pagenum}"></option>
```

