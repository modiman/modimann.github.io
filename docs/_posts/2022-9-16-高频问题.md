## 接口排查与优化

## 优化

1. 尽量利用多线程编程，充分利用CPU资源，另外使用线程池避免频繁的创建与销毁线程带来的开销
2. 使用mq中间件进行异步，让可以并行的任务尽量可以并行执行
3. 数据量大的时候使用分批操作，
   * 查询数据库的场景尽量避免在for循环中操作数据库，尽量使用批量处理来对数据库进行操作，
   * 如果操作的数据量很大，那么我们可以进行分批处理，这样可以避免一次交互的数据量过大，从而导致接口响应过慢。
4. 避免大事务
   * 并发情况下，数据库连接池容易被撑爆
   * 锁定太多的数据，造成大量的阻塞和锁超时
   * 执行时间长，容易造成主从延迟
   * 回滚所需要的时间比较长
5. 优化SQL慢查询
   * 关键的字段是否缺少索引
   * 索引是否用上（使用explain排查）
   * 数据表很大可以考虑分库分表
6. 善于利用缓存
   * 将查询较多、修改较少的数据放进缓存，可以减轻数据库压力，提高接口响应速度
7. 控制好锁的粒度
   * 

# 项目

## 项目中的设计模式

### 策略模式

service层相当于策略模式的体现，只不过项目中只有一种实现	

**角色**

* 策略接口
* 策略具体实现类
* 策略上下文

### 观察者模式

接受轨迹信息后通知消息队列

**角色**

* 被观察者
* 观察者

## 开放性问题

### 学习路线

1. 入门：B站视频
2. 参考书
3. 掘金知乎高赞文章
4. 大厂技术文章
5. 技术文档、源码

### 项目中的困难

## 

### 最近学的技术



## 手写代码

* 跳表
* LRU
* LFU
* 

