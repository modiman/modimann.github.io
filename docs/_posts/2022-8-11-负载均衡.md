## 业务背景

用户请求全部发送到同一台服务器，压力太大，这台服务器宕机会导致整个服务停止工作

解决思路：设置多态服务器，然后设置一个中间服务器，让这台服务器负责接受请求，然后判断哪台服务器负载比较低，将当前请求发送给负载比较低的服务器 nginx

## 负载均衡算法



| 算法 | 优点 | 缺点 |
| ---- | ---- | ---- |
|      |      |      |
|      |      |      |
|      |      |      |



### 轮转（Round Robin）

轮流发送给各个服务器，适合服务器处理能力相同、每个业务处理量差不多的场景

### 加权轮转

给性能更好地服务器更高的权重，能者多劳

### 最少连接

选择当前连接最少的服务器

### IP Hash

给每个请求ip指定一台特定的服务器，保证一个特定用户会访问一个特定服务器

## 健康监测

选择某个服务器的前提是该服务器要是健康的

为了监控健康的服务器，健康检查一般会通过配置的协议和端口尝试去连接服务器来保证服务器正在监听。如果一个服务器的健康检查失败了，也就是说服务器无法正常响应请求，那么就会被自动的移除池子中，流量也不会被分配到这个坏掉的服务器直到它能通过健康检查。

## 反向代理 nginx

* 正向代理：客户端不知道真正的服务端

* 反向代理：服务端不知道真正的客户端
