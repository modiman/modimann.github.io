### cmd进入mysql

1. 将mysql.exe路径加入到环境变量

2. ```bash
   mysql -hlocalhost -uroot -p
   ```

3. 更改用户密码

   ```mysql
   ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '123456';
   ```

   


# select 

## length

### 查询文本列中每一行的长度

```mysql
SELECT LENGTH(item_content)  FROM intro
```

 返回一列，分别代表每一行文本的长度

### 查询所有行文本字数总和

```mysql
# 把刚才查到的结果作为一个新的表i，结果列重命名为len,利用sum函数求长度列的总和
SELECT SUM(i.len) FROM 
(
(SELECT LENGTH(item_content) AS len 
 FROM intro) AS i
)
```

### 多表查询

```sql
SELECT  t1.trace_id ,
		t1. tag_id,
		t1.tag_name,
		t1.area_id ,
		area.name
FROM  (SELECT 
		trace.trace_id ,
		tag.id AS tag_id,
		tag.name AS tag_name,
		trace.area_id 
		FROM trace LEFT JOIN tag  ON trace.tag_id = tag.id) AS t1
LEFT JOIN `area` 
ON t1.area_id = area.id
```

### 多表连接

```jsql
SELECT * FROM
(SELECT
            trace.trace_id,
            tag.id AS tag_id,
            tag.name AS tag_name,
            tag.tag_employee AS tag_employee ,
            area.name AS area_name,
            trace.area_begin_time,
            trace.area_leave_time
             FROM
             trace ,tag, `area`
            WHERE trace.tag_id = tag.id AND trace.area_id = area.id) AS t1
            LEFT JOIN employee ON t1.tag_employee = employee.employee_id
            WHERE tag_id = '1b1e7122-3b88-11eb-95c7-0c9d92c5a7d0'
       ALTER TABLE trace DROP FOREIGN KEY area_id;
```

```sql
SELECT  t1.trace_id ,
		t1. tag_id,
		t1.tag_name,
		t1.area_id ,
		area.name
FROM  (SELECT 
		trace.trace_id ,
		tag.id AS tag_id,
		tag.name AS tag_name,
		trace.area_id 
		FROM trace LEFT JOIN tag  ON trace.tag_id = tag.id) AS t1
LEFT JOIN `area` 
ON t1.area_id = area.id


SELECT
            trace.trace_id,
            tag.id AS tag_id,
            tag.name,
            area.name,
            trace.area_begin_time,
            trace.area_leave_time
FROM
trace ,tag, `area`
WHERE trace.tag_id = tag.id AND trace.area_id = area.id
    
    
SELECT t1.tname,t1.mres,t2.tname,t1.time FROM 
(SELECT m.mid,t.tname,m.mres,m.matime AS TIME FROM m LEFT JOIN t ON t.tid = m.hid) 
AS t1 
LEFT JOIN 
(SELECT m.mid,t.tname,m.mres,m.matime AS TIME FROM m LEFT JOIN t ON t.tid = m.gid) 
AS t2 
ON t1.mid = t2.mid WHERE t1.time BETWEEN '2006-06-01' AND '2006-07-01';
```



# update

### 批量修改id

```mysql
UPDATE intro SET item_id=item_id-5819

UPDATE  ships SET  ship_troop='未知' WHERE ship_troop = '' OR 	 ship_troop = '舰队'
```

### 字符串拼接

```mysql
UPDATE  ships SET  ship_name=CONCAT(ship_model ,ship_num) WHERE ship_name = '' 
```


# 索引
## expain

